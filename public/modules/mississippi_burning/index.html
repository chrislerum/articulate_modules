<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8">

    <title>Mississippi Burning</title>

    <link type="text/css" rel="stylesheet" href="lib/icomoon.css">
    <link type="text/css" rel="stylesheet" href="lib/main.bundle.css">
    <link type="text/css" rel="stylesheet" href="lib/fonts.css">
    <script type="text/javascript" src="lib/player-0.0.11.min.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <a href='/'>Home</a>
    <style>
      .brand--head, .brand--head *   { font-family: Lato !important; }
      .brand--body, .brand--body *   { font-family: Merriweather !important; }
      .brand--lhead, .brand--lhead * { font-family: Lato !important; }
      .brand--lbody, .brand--lbody * { font-family: Merriweather !important; }
      .brand--ui, .brand--ui *       { font-family: Lato !important; }

      .brand--beforeHead:before { font-family: Lato !important; }
      .brand--afterHead:after { font-family: Lato !important; }

      .brand--background        { background-color: #FF631E !important; }
      .brand--background-all *  { background-color: #FF631E !important; }
      .brand--border            { border-color: #FF631E !important; }
      .brand--color             { color: #FF631E !important; }
      .brand--color-all *       { color: #FF631E !important; }
      .brand--shadow            { box-shadow: 0 0 0 0.2rem #FF631E !important; }
      .brand--shadow-all *      { box-shadow: 0 0 0 0.2rem #FF631E !important; }
      .brand--fill              { fill: #FF631E !important; }
      .brand--stroke            { stroke: #FF631E !important; }

      .brand--beforeBackground:before { background-color: #FF631E !important; }
      .brand--beforeBorder:before     { border-color: #FF631E !important; }
      .brand--beforeColor:before      { color: #FF631E !important; }

      .brand--afterBackground:after { background-color: #FF631E !important; }
      .brand--afterBorder:after     { border-color: #FF631E !important; }
      .brand--afterColor:after      { color: #FF631E !important; }

      /* should be applied to containers where links
         need to appear in brand color */
      .brand--linkColor a { color: #FF631E !important; }

      /* should be applied to containers where links
         need to change to brand color on hover */
      .brand--linkColorHover a:hover { color: #FF631E !important; }

      /* should be applied to any single element that
         needs to change color on hover */
      .brand--hoverColor:hover { color: #FF631E !important; }

      /* TODO: probably need a way to create a 5-10% darker/lighter color */
      .brand--linkColor a:hover,
      .button.brand--background:hover { opacity: .65 !important; }

      @media (min-width: 47.9375em) { /* 768px */
        .brand--min768--background { background-color: #FF631E !important; }
        .brand--min768--border     { border-color: #FF631E !important; }
        .brand--min768--color      { color: #FF631E !important; }
      }

      @media (max-width: 47.9375em) { /* 768px */
        .brand--max768--background { background-color: #FF631E !important; }
        .brand--max768--border     { border-color: #FF631E !important; }
        .brand--max768--color      { color: #FF631E !important; }
      }
    </style>
    <div id="app"></div>
    <script>
      (function(root) {
        var data = 'eyJ0aXRsZSI6Ik1pc3Npc3NpcHBpIEJ1cm5pbmciLCJpZCI6IjJXMnMtejlWTFdORDNhbzRRQmx1SHAwWGpySTFmVGxJIiwib3JpZ2luYWxJZCI6bnVsbCwiYXV0aG9yIjoiYXV0aDB8NTkwODkzZDY4NjYwNDc3Mjg5MzRmMGNkIiwic2VsZWN0ZWRBdXRob3JJZCI6IiIsImNvbG9yIjoiI0ZGNjMxRSIsIm5hdmlnYXRpb25Nb2RlIjoiZnJlZSIsInNoYXJlUGFzc3dvcmQiOiIiLCJkZXNjcmlwdGlvbiI6IjxwPkEgZmluZSBjb3Vyc2UgYWJvdXQgc29tZSBzdHVmZi48L3A+Iiwic2hhcmVJZCI6ImFqSnBOTzVmUFcwbXo4M29zTU1VVWVTOFd3cUQ3cms0IiwiY29weU9mIjoiIiwib3JkZXIiOiIxNDkzNzM5MDE1ODkyIiwiZm9udHMiOnsidWkiOnsiZm9udCI6IkxhdG8ifSwiYm9keSI6eyJmb250IjoiTWVycml3ZWF0aGVyIn0sImhlYWRpbmdzIjp7ImZvbnQiOiJMYXRvIn19LCJtZWRpYSI6e30sImNvdmVySW1hZ2UiOnt9LCJsZXNzb25zIjpbeyJpZCI6ImNqMjdwZnJ5aTAwMDAzajY5aXludDQ3YTMiLCJvcmlnaW5hbElkIjpudWxsLCJhdXRob3IiOiJhdXRoMHw1OTA4OTNkNjg2NjA0NzcyODkzNGYwY2QiLCJzZWxlY3RlZEF1dGhvcklkIjoiIiwiY291cnNlSWQiOiIyVzJzLXo5VkxXTkQzYW80UUJsdUhwMFhqckkxZlRsSSIsInRpdGxlIjoiRGVsdGEiLCJkZXNjcmlwdGlvbiI6IjxwPkFsbCBhYm91dCB0aGUgZGVsdGEgcmVnaW9uIG9mIE1pc3Npc3NpcHBpLjwvcD4iLCJ0eXBlIjoidmlkZW8iLCJpY29uIjoiVmlkZW8iLCJpdGVtcyI6W10sIm1lZGlhIjp7InZpZGVvIjp7ImtleSI6InNjcmVlbi1yZWNvcmRpbmctMjAxNy0wNS0wMi1hdC0xMC0xOS0xMC1hbS5tcDQiLCJzcmMiOiJodHRwczovL2Nkbi5hcnRpY3VsYXRlLmNvbS9yZXZpZXcvdXBsb2Fkcy9uUHZYUlBpM2doNC1hUlk3L3NjcmVlbi1yZWNvcmRpbmctMjAxNy0wNS0wMi1hdC0xMC0xOS0xMC1hbS5tcDQiLCJwb3N0ZXIiOiI3LWUtMzA3MzQ3LTItYS03OS00LWQtOS1hLTgyMDMtYy02LWVmYi0wODA3MDU1LWxhcmdldGh1bWIuanBnIiwidGh1bWJuYWlsIjoiaHR0cHM6Ly9pbWFnZXMuYXJ0aWN1bGF0ZS5jb20vYjpmZmYsZjpqcGcsczpjb3ZlcixxOjk2LHc6NzIwL3Jldmlldy91cGxvYWRzLzZiUjBXbmhteHdrdjBNOU8vNy1lLTMwNzM0Ny0yLWEtNzktNC1kLTktYS04MjAzLWMtNi1lZmItMDgwNzA1NS1sYXJnZXRodW1iLmpwZyJ9fSwicGlsZXMiOltdLCJzZXR0aW5ncyI6e30sImR1cGxpY2F0ZWRGcm9tSWQiOiIiLCJkZWxldGVkIjpmYWxzZSwiY3JlYXRlZEF0IjoiMjAxNy0wNS0wMlQxNToyNDozMi44MzBaIiwidXBkYXRlZEF0IjoiMjAxNy0wNS0wMlQxNTozMDoxNS45MDBaIn0seyJpZCI6ImNqMjdwZnlwMjAwMDEzajY5MGhqaGdoZ2oiLCJvcmlnaW5hbElkIjpudWxsLCJhdXRob3IiOiJhdXRoMHw1OTA4OTNkNjg2NjA0NzcyODkzNGYwY2QiLCJzZWxlY3RlZEF1dGhvcklkIjoiIiwiY291cnNlSWQiOiIyVzJzLXo5VkxXTkQzYW80UUJsdUhwMFhqckkxZlRsSSIsInRpdGxlIjoiQmF5b3UiLCJkZXNjcmlwdGlvbiI6IiIsInR5cGUiOiJibG9ja3MiLCJpY29uIjoiQXJ0aWNsZSIsIml0ZW1zIjpbeyJpZCI6ImNqMjdwbjRwMDAwMDczajY5dDdqbG5jMXIiLCJ0eXBlIjoibXVsdGltZWRpYSIsIml0ZW1zIjpbeyJpZCI6MTcsIm1lZGlhIjp7InZpZGVvIjp7ImtleSI6ImNvYXN0bGluZS5tcDQiLCJzcmMiOiJodHRwczovL2Nkbi5hcnRpY3VsYXRlLmNvbS9hc3NldHMvcmlzZS9hc3NldHMvYmxvY2stZGVmYXVsdHMvY29hc3RsaW5lLm1wNCIsInBvc3RlciI6ImNvYXN0bGluZV9wb3N0ZXIucG5nIiwidGh1bWJuYWlsIjoiaHR0cHM6Ly9jZG4uYXJ0aWN1bGF0ZS5jb20vYXNzZXRzL3Jpc2UvYXNzZXRzL2Jsb2NrLWRlZmF1bHRzL2NvYXN0bGluZV90aHVtYi5wbmciLCJvcmlnaW5hbFVybCI6IkNvYXN0bGluZS5tcDQifX0sImNhcHRpb24iOiIifV0sImZhbWlseSI6Im11bHRpbWVkaWEiLCJ2YXJpYW50IjoidmlkZW8iLCJzZXR0aW5ncyI6eyJwYWRkaW5nVG9wIjozLCJwYWRkaW5nQm90dG9tIjozLCJiYWNrZ3JvdW5kQ29sb3IiOiIiLCJlbnRyYW5jZUFuaW1hdGlvbiI6dHJ1ZX19LHsiaWQiOiJjajI3cG4xeTQwMDA2M2o2OWFocHAyOGFnIiwidHlwZSI6InRleHQiLCJpdGVtcyI6W3siaWQiOjMxLCJoZWFkaW5nIjoiSGVhZGluZyIsInBhcmFncmFwaCI6IjxwPldoZW4gd2Ugc2hvdyB1cCB0byB0aGUgcHJlc2VudCBtb21lbnQgd2l0aCBhbGwgb2Ygb3VyIHNlbnNlcywgd2UgaW52aXRlIHRoZSB3b3JsZFxuICAgIHRvIGZpbGwgdXMgd2l0aCBqb3kuIFRoZSBwYWlucyBvZiB0aGUgcGFzdCBhcmUgYmVoaW5kIHVzLiBUaGUgZnV0dXJlIGhhcyB5ZXQgdG8gdW5mb2xkLiBCdXRcbiAgICB0aGUgbm93IGlzIGZ1bGwgb2YgYmVhdXR5IHNpbXBseSB3YWl0aW5nIGZvciBvdXIgYXR0ZW50aW9uLjwvcD4ifV0sImZhbWlseSI6InRleHQiLCJ2YXJpYW50IjoiaGVhZGluZyBwYXJhZ3JhcGgiLCJzZXR0aW5ncyI6eyJwYWRkaW5nVG9wIjozLCJwYWRkaW5nQm90dG9tIjozLCJiYWNrZ3JvdW5kQ29sb3IiOiIiLCJlbnRyYW5jZUFuaW1hdGlvbiI6dHJ1ZX19XSwibWVkaWEiOnt9LCJwaWxlcyI6W10sInNldHRpbmdzIjp7fSwiZHVwbGljYXRlZEZyb21JZCI6IiIsImRlbGV0ZWQiOmZhbHNlLCJjcmVhdGVkQXQiOiIyMDE3LTA1LTAyVDE1OjI0OjQxLjU0MVoiLCJ1cGRhdGVkQXQiOiIyMDE3LTA1LTAyVDE1OjMwOjE1LjkwMFoifV0sImpvYnMiOltdLCJsYWJlbFNldElkIjoiZ1oxcGZ2azBQbW12SlVONEFabmtIQ1BHIiwiZGVsZXRlZCI6ZmFsc2UsImNyZWF0ZWRBdCI6IjIwMTctMDUtMDJUMTU6MjM6NTMuNDEyWiIsInVwZGF0ZWRBdCI6IjIwMTctMDUtMDJUMTU6MzA6MTUuODkyWiIsIm1hcmtDb21wbGV0ZSI6ZmFsc2UsImF1dGhvcnMiOlt7ImlkIjoiYXV0aDB8NTkwODkzZDY4NjYwNDc3Mjg5MzRmMGNkIiwiYXZhdGFyIjoic21hbGwucG5nIiwiYXV0aG9yTmFtZSI6IkNocmlzIExlcnVtIn1dLCJsbXNPcHRpb25zIjp7ImVuYWJsZUV4aXRDb3Vyc2UiOmZhbHNlfX0=';
        var labelSet = {"id":"gZ1pfvk0PmmvJUN4AZnkHCPG","author":"auth0|590893d6866047728934f0cd","name":"English","defaultId":1,"defaultSet":true,"labels":{"quizNext":"NEXT","quizScore":"Your score","quizStart":"START QUIZ","courseExit":"EXIT COURSE","lessonName":"Lesson","lessonNext":"NEXT LESSON","quizSubmit":"SUBMIT","courseStart":"START COURSE","embedViewOn":"VIEW ON","quizCorrect":"Correct","quizPassing":"PASSING","quizResults":"Quiz Results","courseResume":"RESUME COURSE","quizQuestion":"Question","courseDetails":"DETAILS","embedReadMore":"Read more","quizIncorrect":"Incorrect","quizTakeAgain":"TAKE AGAIN","sortingReplay":"Replay","lessonComplete":"COMPLETE","lessonPrevious":"PREVIOUS LESSON","processComplete":"Complete","processNextStep":"NEXT STEP","processStepName":"Step","lessonRestricted":"Lessons must be completed in order","blocksClickToFlip":"Click to flip","blocksPreposition":"of","lessonPreposition":"of","processLessonName":"Lesson","processStartAgain":"START AGAIN","sortingCardsCorrect":"Cards Correct","processStepPreposition":"of"},"deleted":false,"createdAt":"2017-05-02T15:23:55.976Z","updatedAt":"2017-05-02T15:23:55.976Z"};

        var quizId = null;
        var completionPercentage = 100;
        var reporting = 'passed-incomplete';

        var stuffToPick = [
          'SetObjectiveStatus',
          'SetBookmark',   // set identifier for bookmark
          'SetDataChunk',  // set a stringified object with lesson progress
          'GetDataChunk',  // retreive stringified object with lesson progress
          'SetReachedEnd', // tell LMS user completed course
          'SetFailed', // tell LMS user Failed course
          'SetPassed', // tell LMS user Passed the course
          'SetScore', // Report Users Score to the LMS (for Pass and fail)
          'GetStatus', // Get Current Status
          'ResetStatus', // Reset the Status
          'Finish',
          'ConcedeControl'
        ];

        var LMSProxy = pick(stuffToPick, window.parent, Function.prototype);
        finish(0);

        var cache = getLMSData();


          if(!isPassed()) {
            LMSProxy.SetObjectiveStatus(
              '',
              window.parent.LESSON_STATUS_FAILED
            );
          }


        function isPassed() {
          return LMSProxy.GetStatus() === window.parent.LESSON_STATUS_PASSED;
        }

        function assign(target) {
          if (target === undefined || target === null) {
            throw new TypeError('assign: Cannot convert undefined or null to object');
          }

          var output = Object(target);

          for (var index = 1; index < arguments.length; index++) {
            var source = arguments[index];
            if (source !== undefined && source !== null) {
              for (var nextKey in source) {
                if (source.hasOwnProperty(nextKey)) {
                  output[nextKey] = source[nextKey];
                }
              }
            }
          }
          return output;
        }

        function getLMSData() {
          if(!cache) {
            return JSON.parse(LMSProxy.GetDataChunk() || '{ "quizItems": {} }');
          }

          return cache;
        }

        function concatLMSData(data) {
          if(!data.quizItems) {
            assign(cache, data);
          }

          LMSProxy.SetDataChunk(JSON.stringify(cache));
        }

        function completeOut(passed) {
          if(passed) {
            switch(reporting) {
              case 'completed-incomplete':
              case 'completed-failed':
                LMSProxy.ResetStatus();
                LMSProxy.SetReachedEnd();
                break;

              case 'passed-incomplete':
              case 'passed-failed':
                LMSProxy.SetPassed();
                LMSProxy.SetReachedEnd();
                break;
            }

          } else {
            switch(reporting) {
              case 'passed-failed':
              case 'completed-failed':
                if(!isPassed()) {
                  LMSProxy.SetFailed();
                }
                break;
            }
          }
        }

        function bookmark(id) {
          var url = 'index.html#/list/' + id + '/preview';

          LMSProxy.SetBookmark(url, '');
        }

        function incQuizAttempts(quizId, attempts) {
          var lmsAttempts = assign({}, { attempts: {} }, getLMSData()).attempts;

          if(!lmsAttempts[quizId]) {
            lmsAttempts[quizId] = attempts;
          }

          lmsAttempts[quizId] = lmsAttempts[quizId] + 1;
          concatLMSData({ attempts: lmsAttempts });

          return lmsAttempts[quizId];
        }

        function getQuizAttempts(quizId, attempts) {
          var lmsAttempts = assign({}, { attempts: {} }, getLMSData()).attempts;

          if(!lmsAttempts[quizId]) {
            lmsAttempts[quizId] = attempts;
          }

          return lmsAttempts[quizId];
        }

        function getCurrentTime(id, currentTime) {
          var times = getLMSData().times || {};
          return times[id] || currentTime;
        }

        function setCurrentTime(id, currentTime) {
          var times = getLMSData().times || {};
          times[id] = Math.max(currentTime, times[id]);
          concatLMSData({ times: times });
          return currentTime;
        }

        function reportScore(id, score) {
          var highScore = Math.max(getLMSData().score || 0, score);
          concatLMSData({ score: highScore });

          LMSProxy.SetScore(highScore, 100, 0);
        }

        function finish(totalProgress) {
          if(quizId === null && completionPercentage != undefined && totalProgress >= completionPercentage) {
            completeOut(true)
          }
        }

        function exit() {
          LMSProxy.ConcedeControl();
        }

        function finishQuiz(passed, score, id) {
          delete cache.quizItems[id];
          concatLMSData({ quizItems: cache.quizItems });

          if(id == quizId) {
            reportScore(id, score);
            completeOut(passed);
          }
        }

        function getProgress() {
          return assign({}, { progress: {} }, getLMSData()).progress;
        }

        function setProgress(progress) {
          concatLMSData({ progress: progress });
        }

        function pickQuiz(item) {
          return pick([ 'isDone', 'isComplete', 'isCorrect' ], item);
        }

        function setQuizItems(quizId, items) {
          var quizItems = getLMSData().quizItems;

          quizItems[quizId] = items.map(pickQuiz);
          concatLMSData({ quizItems: quizItems });

          return items;
        }

        function getQuizItems(quizId) {
          return assign({}, { quizItems: {} }, getLMSData()).quizItems[quizId];
        }

        function getScores(scores) {
          var result = assign({}, { scores: scores }, getLMSData()).scores;
          return result;
        }

        function setScore(id, score) {
          var scores = assign({}, { scores: {} }, getLMSData()).scores;

          scores[id] = score;
          concatLMSData({ scores: scores });

          return score;
        }

        function applyLMSData(data) {
          data.lessons
            .filter(function(l) { return l.type === 'quiz' })
            .forEach(function(l) {
              var retryCount = l.settings.retryQuiz ? l.settings.retryCount : 0;
              var attempts = parseInt(retryCount) !== -1 ? getQuizAttempts(l.id, 0) : -Infinity;
              var items = getQuizItems(l.id);

              if(items) {
                l.items.forEach(function(item, indx) {
                  assign(item, items[indx]);
                });
              }

              l.isDone = attempts > retryCount;
            });

          return data;
        }

        function fetch(decode, defaultData) {
          return applyLMSData(decode(data) || defaultData);
        }

        function fetchLabelSet() {
          return labelSet;
        }

        function resolvePath(path) {
          return ('assets/').concat(path);
        }

        function createHistory(browserFunc, hashFunc) {
          return hashFunc;
        }

        function pick(keys, obj, def) {
          return keys.reduce(function(memo, key) {
            if(obj[key] === undefined) {
              if(def !== undefined) {
                memo[key] = def
              }
            } else {
              memo[key] = obj[key]
            }

            return memo;
          }, {});
        }

        function debounce(fn, delay) {
          var timer = null;
          return function () {
            var context = this, args = arguments;
            clearTimeout(timer);
            timer = setTimeout(function () {
              fn.apply(context, args);
            }, delay);
          };
        }

        root.Runtime = {
          fetch: fetch,
          fetchLabelSet: fetchLabelSet,
          resolvePath: resolvePath,
          createHistory: createHistory,
          bookmark: bookmark,
          exit: exit,
          finish: finish,
          finishQuiz: finishQuiz,
          getProgress: getProgress,
          setProgress: debounce(setProgress, 500),
          setQuizItems: debounce(setQuizItems, 500),
          getScores: getScores,
          setScore: setScore,
          getCurrentTime: getCurrentTime,
          setCurrentTime: setCurrentTime,
          incQuizAttempts: incQuizAttempts,
          getQuizAttempts: getQuizAttempts
        };
      }(window));
    </script>
    <script src="lib/main.bundle.js"></script>
  </body>
</html>
